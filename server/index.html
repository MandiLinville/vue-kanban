<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Almost Trello</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
		crossorigin="anonymous">
		<style>
			html {
				padding: 20px;
			}

			.messages {
				width: 600px;
				height: 400px;
				overflow-x: hidden;
				overflow-y: scroll;
			}
		</style>
</head>

<body>
	<div class="container">
		<form class="form-inline">
			<div class="form-group">
				<label for="exampleInputName2">Name</label>
				<input type="text" class="form-control" id="chatMessage" placeholder="">
			</div>
			<button type="button" id="chatBtn" class="btn btn-success">Send</button>
		</form>
		<div class="messages">
			<ul id="messages"></ul>
		</div>
	</div>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		var client = io.connect('http://192.168.0.16:3000');
		var chatMessage = document.getElementById('chatMessage');
		var chatBtn = document.getElementById('chatBtn');
		var messages = document.getElementById('messages');

		chatBtn.addEventListener('click', function() {
			client.emit('message', {
				name: 'Tom',
				text: chatMessage.value
			});
		});

		client.on('message', function (data) {

			console.log(data);

			if(data.name && data.text) {
				var item = document.createElement('li');

				item.innerHTML = `<strong>${data.name}</strong> ${data.text}`;

				messages.appendChild(item);
			}
		});

		client.emit('message', 'Test message.');
	</script>
</body>

</html>